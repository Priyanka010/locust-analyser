
# Locust Analyzer API (PDF Support)

This FastAPI service accepts a **PDF Locust report**, extracts performance data using `pdfplumber`, and analyzes it using **Vertex AI's Gemini model** to produce a natural language summary.

---

## ðŸ›  Local Development

Install dependencies:

```bash
pip install -r requirements.txt
```

Run locally:

```bash
uvicorn main:app --reload --port 8080
```

---

## ðŸ“¤ API

### `POST /analyze`

Upload a Locust report in PDF format.

**Request:**

* `multipart/form-data`

  * `file`: PDF file exported from a Locust run

**Response:**

* `200 OK`: Returns a plain-text summary of the analysis (generated by Gemini)
* `400 Bad Request`: Invalid or unreadable PDF
* `500 Internal Server Error`: PDF parsing or Gemini failure

---

## ðŸš€ Cloud Run Deployment

Before deploying, set the following environment variables:

* `GCP_PROJECT`: Your GCP project ID
* `GCP_REGION`: e.g., `australia-southeast1`

**Deploy via Google Cloud CLI:**

```bash
gcloud run deploy locust-api \
  --source . \
  --region $GCP_REGION \
  --allow-unauthenticated \
  --set-env-vars GCP_PROJECT=$GCP_PROJECT,GCP_REGION=$GCP_REGION
```

---

## ðŸ“¦ Dependencies

* `FastAPI` â€“ API framework
* `pdfplumber` â€“ PDF text/table extractor
* `pandas` â€“ DataFrame formatting for markdown
* `google-cloud-aiplatform` â€“ Gemini via Vertex AI
* `uvicorn` â€“ ASGI server

---

## ðŸ§­ Coming Soon

* ðŸ§  Local version using [Gemma](https://ai.google.dev/gemma)
